<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Login Page</title>
    </h:head>
    <h:body style="background-color: #324b72">
        <p:growl id="growl" sticky="false" showDetail="true" life="3000" />
        <h:form id="loginForm">		
            <p:panel id="loginPnl" header="Login JPA "
                     style="width: 400px; margin: 10% auto;">
                <h:panelGrid id="loginPanel" columns="2" cellpadding="5">
                    <h:outputText value="Username" />
                    <p:inputText  id="username" value="#{userController.username}" required="true" 
                                  requiredMessage="Enter your username." style="width: 100%">
                        <p:message for="username" />
                    </p:inputText>

                    <p:spacer /><p:spacer />	
                    <h:outputText value="Password" />
                    <p:password id="password" value="#{userController.password}" 
                                required="true" requiredMessage="Enter your password." style="width: 100%">
                        <p:message for="password" />
                    </p:password>
                </h:panelGrid>
                <h:panelGrid columns="2" cellpadding="10" width="100%">
                    <p:commandButton id="loginButton" action="#{userController.login()}"
                                     value="Login" update="loginForm" ajax="true" >
                    </p:commandButton>
                    <p:commandButton id="registerButton" action="#{userController.register()}"
                                     value="Register" update="loginForm" ajax="true" style="text-align: center; width: 80%" >
                    </p:commandButton>
                </h:panelGrid>
            </p:panel>
            <!--		<p:blockUI block="loginPnl" trigger="loginButton" id="p_blockUIid">
                                    <p:graphicImage value="resources/images/loader.gif" />
                            </p:blockUI>-->
        </h:form>

        <script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.loggedIn) {
                    PF('dlg').jq.effect("shake", {times: 5}, 100);
                } else {
                    PF('dlg').hide();
                    $('#loginLink').fadeOut();
                }
            }
        </script>
    </h:body>
</html>

